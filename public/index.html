<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Vehicle Tracker</title>
    <script src="js/jquery.min.js"></script>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=RobotoDraft:300,400,500,700,400italic"/>
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <script href="js/bootstrap.min.js"></script>
    <script>
        checkLogin();


        function checkLogin(){
            if(window.localStorage.getItem("loggedIn") == true){
                $(location).attr('href', 'home.html')
            }
        }
    </script>
   <style>
       .form-signin
       {
           max-width: 330px;
           padding: 15px;
           margin: 0 auto;
       }
       .form-signin .form-signin-heading, .form-signin .checkbox
       {
           margin-bottom: 10px;
       }
       .form-signin .checkbox
       {
           font-weight: normal;
       }
       .form-signin .form-control
       {
           position: relative;
           font-size: 16px;
           height: auto;
           padding: 10px;
           -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
           box-sizing: border-box;
       }
       .form-signin .form-control:focus
       {
           z-index: 2;
       }
       .form-signin input[type="text"]
       {
           margin-bottom: -1px;
           border-bottom-left-radius: 0;
           border-bottom-right-radius: 0;
       }
       .form-signin input[type="password"]
       {
           margin-bottom: 10px;
           border-top-left-radius: 0;
           border-top-right-radius: 0;
       }
       .account-wall
       {
           margin-top: 20px;
           padding: 40px 0px 20px 0px;
           background-color: #f7f7f7;
           -moz-box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
           -webkit-box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
           box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
       }
       .login-title
       {
           color: #555;
           font-size: 18px;
           font-weight: 400;
           display: block;
       }
       .profile-img
       {
           width: 96px;
           height: 96px;
           margin: 0 auto 10px;
           display: block;
           -moz-border-radius: 50%;
           -webkit-border-radius: 50%;
           border-radius: 50%;
       }
       .need-help
       {
           margin-top: 10px;
       }
       .new-account
       {
           display: block;
           margin-top: 10px;
       }








       .spinner {
           -webkit-animation: rotator 1.4s linear infinite;
           animation: rotator 1.4s linear infinite;
           top: 25%; margin: 0 auto; position: relative;;
       }

       @-webkit-keyframes rotator {
           0% {
               -webkit-transform: rotate(0deg);
               transform: rotate(0deg);
           }
           100% {
               -webkit-transform: rotate(270deg);
               transform: rotate(270deg);
           }
       }

       @keyframes rotator {
           0% {
               -webkit-transform: rotate(0deg);
               transform: rotate(0deg);
           }
           100% {
               -webkit-transform: rotate(270deg);
               transform: rotate(270deg);
           }
       }
       .path {
           stroke-dasharray: 187;
           stroke-dashoffset: 0;
           -webkit-transform-origin: center;
           -ms-transform-origin: center;
           transform-origin: center;
           -webkit-animation: dash 1.4s ease-in-out infinite, colors 5.6s ease-in-out infinite;
           animation: dash 1.4s ease-in-out infinite, colors 5.6s ease-in-out infinite;
       }

       @-webkit-keyframes colors {
           0% {
               stroke: #4285F4;
           }
           25% {
               stroke: #DE3E35;
           }
           50% {
               stroke: #F7C223;
           }
           75% {
               stroke: #1B9A59;
           }
           100% {
               stroke: #4285F4;
           }
       }

       @keyframes colors {
           0% {
               stroke: #4285F4;
           }
           25% {
               stroke: #DE3E35;
           }
           50% {
               stroke: #F7C223;
           }
           75% {
               stroke: #1B9A59;
           }
           100% {
               stroke: #4285F4;
           }
       }
       @-webkit-keyframes dash {
           0% {
               stroke-dashoffset: 187;
           }
           50% {
               stroke-dashoffset: 46.75;
               -webkit-transform: rotate(135deg);
               transform: rotate(135deg);
           }
           100% {
               stroke-dashoffset: 187;
               -webkit-transform: rotate(450deg);
               transform: rotate(450deg);
           }
       }
       @keyframes dash {
           0% {
               stroke-dashoffset: 187;
           }
           50% {
               stroke-dashoffset: 46.75;
               -webkit-transform: rotate(135deg);
               transform: rotate(135deg);
           }
           100% {
               stroke-dashoffset: 187;
               -webkit-transform: rotate(450deg);
               transform: rotate(450deg);
           }
       }
   </style>
</head>
<body class="dashboard">

<div class="container">
    <div class="row">
        <div class="col-sm-6 col-md-4 col-md-offset-4">

            <h1 class="text-center login-title">Sign in to continue</h1>
            <div class="account-wall">



                <img class="profile-img" src="https://lh3.googleusercontent.com/-Hcy9FEX1Z8g/AAAAAAAAAAI/AAAAAAAAAAA/AOtt-yE07kdWD2eBYXxf2g4oni-qUwCU7w/mo/photo.jpg?sz=120"
                     alt="">

                <form class="form-signin">
                    <input type="text" id="email" class="form-control" placeholder="Email" required autofocus>
                    <input type="password" id="password" class="form-control" placeholder="Password" required>
                    <button id="submit_btn" class="btn btn-lg btn-primary btn-block" type="button">
                        Sign in</button>
                    <label class="checkbox pull-left">
                        <input type="checkbox" value="remember-me">
                        Remember me
                    </label>
                    <a href="#" class="pull-right need-help">Need help? </a><span class="clearfix"></span>
                </form>
            </div>
            <!--<a href="#" class="text-center new-account">Create an account </a>-->
        </div>
    </div>
</div>


</body>


<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>

<script>
    var config = {
        apiKey: "AIzaSyDkgNqZ-0UbqCaVOdNxWdBt4rL6hwptfVs",
        authDomain: "hotspot-b7211.firebaseapp.com",
        databaseURL: "https://hotspot-b7211.firebaseio.com",
        storageBucket: "hotspot-b7211.appspot.com",
    };
    firebase.initializeApp(config);
    var database = firebase.database();

    $('#submit_btn').click(function(){

        $("#submit_btn").attr("disabled", false);
        var email = $('#email').val();
        var password = $('#password').val();


        firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {


            $("#submit_btn").removeAttr("disabled");
            var errorCode = error.code;
            var errorMessage = error.message;
            //console.log("Login failed");
            console.log(error);
            alert(errorMessage);


            //console.log(userData);
            //window.localStorage.setItem("loggedIn",true);
        }).then(function(data) {

            if(data) {
                $("#submit_btn").removeAttr("disabled");
                //console.log("Login was successful "+data);
                console.log(data);
                window.localStorage.setItem("loggedIn", true);
                window.localStorage.setItem("loggedInData", data);
                $(location).attr('href', 'home.html')
            }else{

            }

        });

    });




</script>
</html>
